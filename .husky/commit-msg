#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

commit_msg_file="$1"
first_line="$(head -n 1 "$commit_msg_file")"

pattern='^(feat|docs|chore)(\\([a-z0-9_-]+\\))?: .+'

if ! printf '%s' "$first_line" | LC_ALL=C grep -Eq "$pattern"; then
  cat <<'EOF'
Invalid commit message format.
Use one of:
  feat: your message
  docs: your message
  chore: your message
Optional scope:
  feat(scope): your message
EOF
  exit 1
fi
